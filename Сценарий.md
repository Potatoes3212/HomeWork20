# Авторизция пользователя 
## Цель 
* Как неавторизованный пользователь я хочу создать профиль, чтобы получить доступ к созданию заказа.
## Акторы
* Пользователь
* FE 
* BE
* БД
## Описание
### Предусловия
* Пользователь неавторизован
### Основной сценарий
1. Пользователь переходит в раздел авторизации
2. FE отображает пользователю pop-up окно авторизации
3. Пользователь вводит номер телефона в форму и наживает “войти”
4. FE запрашивает авторизацию для пользователя с таким номером `вызывает метод POST /auth/user-auth`
5. BE проверяет наличие пользователя в БД
6. BE отправляет пользователю СМС с кодом для авторизации
7. FE отображает пользователю форму для ввода кода авторизации
8. Пользователь вводит код из СМС в форму нажимает ”войти”
9. FE отправляет введенное значение кода `вызывает метод POST /auth/code`
10. BE проверяет корректность кода и возвращает в ответе токен авторизации для пользователя
### Альтернативный сценарий
#### *Пользователь с таким номером не существует в БД*
5. (a) BE возвращает на запрос авторизации пользователя ошибку
6. (a) FE отображает пользователю окно для регистрации
7. (a) Пользователь заполняет данные для регистрации и нажимает “Продолжить”
8. (a) FE отправляет данные пользователя для регистрации `вызывает метод POST /auth/registrate`
9. (a) BE сохраняет данные пользователя в БД и возвращает в ответе созданную сущность
10. (a) Продолжение основного сценария с шага 6
#### *Пользователю не пришло СМС с кодом*
8. (b) Пользователь нажимает “Отправить код повторно”
9. (b) FE отправляет запрос на повторную отправку кода `вызывает метод POST /auth/resend-code`
10. (b) BE повторно отправляет пользователю СМС с кодом
### Результат
* Пользователь авторизован в сервисе
---
![Енот](https://tr.411answers.com/uploads/1b/1b6b68bd6751472edfed536e959401396f13719f.jpg "Енот")